# ShikaGraph
＜歯科医院専用お絵かきアプリShikaGraphの開発仕様書＞
1.ファイルメーカー（FM)とWEBアプリのハイブリッド構造を持ったアプリとします
2.それぞれの役割
FM＞UIのメインと描画画像管理､背景画像管理、ライセンス管理などのデータベース機能を担当
WEBアプリ(ShikaGraph)>FM内のWEBV(ビューワ）に基本的な描画機能とFMへの画像データ等の引き渡しの機能を担当
3.ShikaGraphの基本的仕様について
3-1.マルチレイヤー構造は取らず､単一レイヤー構造で構成する
3-2.Fabric.jsライブラリの導入によるオブジェクト指向設計への移行を行うことを前提とする
4.既存の資産を最大限活用できるように配慮する
4-1.FMアプリにはWEBアプリとデータをやりとりする査なざまなスクリプトがすでに実装されており､これらとShikaGraphが連携ガットレル用に開発を行うこと
4-2.ShikaGraphで使用するアイコンはPNGのものを使用する>すでにデータあり
4-3ShikagraphのUIについては旧OralCanvasのデザインを利用すること.但しツールエリアに新規タブ（TBI)を追加すること>新規タブに追加するアイコンについては私が作成します
5.基本的な機能について
5-1.フリードロー機能：FDW>自由曲線を引く色3色(黒赤青）線の太さ3種(細中太）
5-2.テキスト入力機能:TXT>文字の入力機能色3色(黒赤青）文字の大きさ3種（小中大）
5-2.スタンプ機能:STP>ツールエリアのアイコンからスタンプを押せるように
5-3.消しゴム機能：FDW&STP画像を消せる機能
5-4背景画像の入替機能：BG>背景画像はFMアプリ内で管理。それを背景画像として差し替えられるようにする
5-4.キャンバスのお絵かきBG+FDW+STPを合成してFMへ取り込む機能
5-5.アンドゥーリドゥー機能
残りの事項は検討内容書に準ずる事とします

ShikaGraphのコード構成について
コード構成の推奨アプローチ
ShikaGraphでは、Fabric.jsを使用する
推奨ファイル構成
/ShikaGraph/
├── index.html           # メインHTML
├── styles.css           # スタイル定義
├── js/
│   ├── main.js          # メインアプリケーションロジック
│   ├── canvas-manager.js # キャンバス初期化と管理
│   ├── pointer-events.js # ポインターイベント処理
│   ├── draw-mode.js     # 描画モード機能
│   ├── select-mode.js   # 選択モード機能
│   ├── stamp-mode.js    # スタンプ機能（必要な場合）
│   ├── filemaker-integration.js # FM連携
│   └── utils.js         # ユーティリティ関数
├── lib/
│   └── fabric.min.js    # Fabric.js（バージョン4.6.0）
└── assets/              # 画像等のアセット
メリット
1. モジュール性: 機能ごとに分割しつつも過度に細分化しない
2. メンテナンス性: 関連する機能を論理的にグループ化
3. 読みやすさ: ファイルサイズを適切に保ち、コードナビゲーションを容易に
4. 並行開発: 複数の機能を同時に開発可能